---
description: 感測器由三個主要元件組成：資料收集器、磁碟隊列和資料傳輸器。
title: 基本元件有哪些
uuid: 32e6e8d9-90ee-4db1-8883-dbdf245df26f
exl-id: aee6a601-590a-43e0-aeeb-42a4522e55c8
source-git-commit: b1dda69a606a16dccca30d2a74c7e63dbd27936c
workflow-type: tm+mt
source-wordcount: '806'
ht-degree: 0%

---

# 基本元件有哪些{#what-are-basic-components}

{{eol}}

感測器由三個主要元件組成：資料收集器、磁碟佇列和資料傳送器。

![](assets/Visual-Sensor.png)

## 資料收集器 {#section-f970eaff30364a3c8106d5ec9c1b5caa}

資料收集器（收集器）是在Web伺服器進程內執行的NSAPI、ISAPI、J2EE篩選器servlet或Apache模組。

它會擷取每個HTTP請求的原始事件資料，Web伺服器會處理這些資訊，並將這些資訊存入磁碟佇列。 如果在同一台電腦上運行多個Web伺服器實例，則每個實例都載入其自己的收集器模組實例；但是，收集器的所有實例都會將其事件資料寫入相同的磁碟隊列。

## 磁碟隊列 {#section-41aac77ab30e48478d1b31eac288df05}

磁碟隊列（隊列）是容錯的、FIFO（先入先出）記憶體映射的隊列檔案，可緩衝Sensor收集的原始事件資料，為安裝該資料的Web伺服器上收集的事件資料提供臨時儲存。

為了防止隊列在不受限制的情況下擴展（並因此佔用所有可用磁碟空間），隊列將保留在固定大小的檔案中，這意味著它僅保留給定容量的事件資料。 安裝感測器時，隊列檔案的大小在感測器配置檔案txlogd.conf的QueueSize參數中配置。 有關txlogd.conf參數的資訊，請參閱Sensor Txlogd.conf檔案參數。

建立後，檔案的物理長度不會增長或縮小。 收集器只會將新事件資料存放到佇列中，而傳送器會從中提取事件。 如果收集器到達檔案的結尾，它將停止寫入隊列檔案。

一般而言，傳送器會從佇列中提取事件，速度就像收集器存放事件一樣快。 不過，如果傳送器與Insight Server之間的連線緩慢或無法使用，佇列可能會填入未傳送的事件。 在此情況下，收集器停止收集資料，直到發送器下拉隊列為止。 在此期間，Web伺服器處理的請求資訊將永久丟失。

**確定隊列大小**

在安裝Sensor之前，必須確定隊列需要的大小。 為防止永久性資料遺失，請務必建立足夠大的佇列，以容納在與Insight Server的連線中斷時間最長（亦即為數天尖峰活動的充足儲存）期間可能累積的事件數。 該佇列必須經過設定，才能保留足夠的事件資料，讓系統管理員有時間還原目標Insight Server的網路存取權，或修復或取代Insight Server，而不會遺失任何資料。 如果感測器失敗，並且無法使用有效且可訪問的隊列檔案來保存事件資料，則後續資料將丟失。

>[!NOTE]
>
>Sensor運行的每台電腦的管理員必須了解本地隊列檔案的獨特性質，以確保他們不會將其視為可刪除、存檔或壓縮的普通日誌檔案。

Adobe建議將隊列配置為至少保留安裝感測器的伺服器生成的十(10)個事件資料峰值天。 也就是說，把去年任何峰值日的事件資料量乘以10。

此建議假設如下：

* 貴公司的資訊技術團隊正在按照本指南Administering Sensor中詳述的方式監視每個Sensor，並且每天至少監視一次。 如果情況並非如此，則應適當延長此期間。
* 貴公司的資訊技術團隊能在72小時內恢復網路無障礙，或更換或修復任何已安裝的Insight Server。 如果情況並非如此，則應適當延長此期間。
* 感測器的配置保持不變。
* 沒有外部事件（例如大型行銷活動）會導致網站伺服器產生的事件資料量大幅增加。

您選擇的隊列大小主要取決於根據貴公司在響應時間和週末/節假日系統管理方面的做法和策略而需要的系統監控級別。 由於較大的佇列大小較好，因此Adobe建議您的公司盡可能讓佇列大。

>[!NOTE]
>
>較大的隊列檔案大小不會影響效能。

如需關於調整佇列大小的進一步建議，請聯絡Adobe諮詢服務。

## 資料傳送器 {#section-2dc03d37d73b4cc6bdd5af6b346350d4}

發送器是獨立進程（例如，基於UNIX的電腦上的守護程式或Windows電腦上的服務），與Web伺服器在同一台電腦上執行。

傳送器會從磁碟佇列中讀取事件資料、壓縮該資料，並透過HTTP/S將其傳送至您指定的Insight Server，在中處理並儲存 **.vsl** 檔案。
